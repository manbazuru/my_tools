$(function(){function t(t){c=t.originalEvent,a=c.changedTouches[0].pageX,r=c.changedTouches[0].pageY,$(".startx").text("startX : "+a),$(".starty").text("startY : "+r)}function e(t){t.preventDefault(),c=t.originalEvent,a=c.changedTouches[0].pageX,r=c.changedTouches[0].pageY,$(".movex").text("moveX : "+a),$(".movey").text("moveY : "+r)}function n(){$(".endx").text("endX : "+a),$(".endy").text("endY : "+r)}var a,r,c,s="ontouchend"in document,o=$(".js-test-hitarea");s&&o.on({touchstart:t,touchmove:e,touchend:n});var i,g,p,d,h,l,u,f,v,m=$(".js-carr"),x=m.children(".js-carr-wrap"),j=x.children(".js-carr-contents"),T=m.children("div").hasClass("js-carr-pager"),X=[],Y=j.css("padding-left").split("px"),w=j.css("padding-right").split("px"),E=(j.width()+parseInt(Y[0],10)+parseInt(w[0],10))/3,M=function(){u=0,f=100/j.length,s&&j.on({touchstart:function(t){C.carrStart(t)},touchmove:function(t){C.carrMove(t)},touchend:function(){C.carrEnd()}}),T&&C.createPager(),$(".icon-left").on("click",function(){C.goLeft()}),$(".icon-right").on("click",function(){C.goRight()})},C={carrStart:function(t){c=t.originalEvent,p=c.changedTouches[0].pageX,d=c.changedTouches[0].pageY,X.splice(0,X.length,p,d)},carrMove:function(t){c=t.originalEvent,p=c.changedTouches[0].pageX,d=c.changedTouches[0].pageY,h=X[0]-p,l=X[1]-d,(h>20||-20>h||l>18||-18>l)&&t.preventDefault(),v=C.calcPercent(h,".js-carr-wrap"),x.css({transform:"translate3d("+(u-v)+"%,0,0)"})},carrEnd:function(){X[0]<p+20&&X[0]>p-20&&(h=0),E>h&&h>-E?x.css({transform:"translate3d("+u+"%,0,0)"}):h>E?C.goRight():-E>h&&C.goLeft()},goLeft:function(){u+=f,u>0&&(u=(j.length-1)*-f),x.stop().css({transform:"translate3d("+u+"%,0,0)"}),T&&C.pagerMove()},goRight:function(){u-=f,u<(j.length-1)*-f&&(u=0),x.stop().css({transform:"translate3d("+u+"%,0,0)"}),T&&C.pagerMove()},calcPercent:function(t,e){var n=$(e).css("padding-left").split("px"),a=$(e).css("padding-right").split("px"),r=$(e).width()+parseInt(n[0],10)+parseInt(a[0],10);return t/=r/f},createPager:function(){i=m.children(".js-carr-pager"),i.append('<ul class="js-carr-pager-wrap">');for(var t=0;t<j.length;t++)$(".js-carr-pager-wrap").append('<li class="js-carr-pager-item">');$(".js-carr-pager-item").first().addClass("_on")},pagerMove:function(){g=-(u*j.length/100),i.find("li").removeClass("_on").eq(g).addClass("_on")}};M()});